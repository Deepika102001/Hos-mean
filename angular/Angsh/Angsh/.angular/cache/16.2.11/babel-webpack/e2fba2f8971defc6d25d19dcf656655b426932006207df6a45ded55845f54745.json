{"ast":null,"code":"export {};","map":{"version":3,"names":[],"sources":["C:\\Users\\biswa\\Desktop\\New folder\\Hos-mean\\angular\\Angsh\\Angsh\\src\\app\\Pharmacist\\pharmamedicine\\pharmamedicine.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { FormGroup, FormBuilder, Validators, FormControl } from '@angular/forms';\r\nimport{router}\r\n\r\n@Component({\r\n  selector: 'app-pharmamedicine',\r\n  templateUrl: './pharmamedicine.component.html',\r\n  styleUrls: ['./pharmamedicine.component.css']\r\n})\r\nexport class PharmamedicineComponent {\r\n\r\n  medicine: any[] = [];\r\n  isShowForm:boolean = false\r\n  isNewMedicineAdded:boolean = false\r\n  isEdit:boolean = false\r\n\r\n  medicineForm!: FormGroup;\r\n\r\n  constructor(private formBuilder: FormBuilder,private http: HttpClient) {}\r\n  onSubmit() {\r\n    console.log(this.medicineForm.value);\r\n  }\r\n\r\n  deleted: number = -1;\r\n\r\n  onPriceChange(event: any) {\r\n    let value = parseFloat(event.target.value);\r\n  \r\n    // Increase price by 18%\r\n    let increasedPrice = value * 1.18;\r\n  \r\n    // Decrease the increased price by 10%\r\n    let finalPrice = increasedPrice * 0.9;\r\n  \r\n    // Logging the results\r\n    console.log('Increased Price by 18%:', increasedPrice);\r\n    console.log('Final Price after decreasing by 10%:', finalPrice);\r\n    \r\n  \r\n    // Set the final price to the form control\r\n    this.medicineForm.controls['finalPrice'].setValue(finalPrice);\r\n   \r\n  }\r\n \r\n  ngOnInit(): void {\r\n    this.fetchMedicineData();\r\n    this.medicineForm = this.formBuilder.group({\r\n      medicineName: new FormControl('',[Validators.required]),\r\n      dosage:  new FormControl('',[Validators.required]) ,\r\n      price:  new FormControl('',[Validators.required]),\r\n      gst: new FormControl(18,[Validators.required]),\r\n      discount: new FormControl(10,[Validators.required]),\r\n      finalPrice: new FormControl('',[Validators.required]),\r\n    });\r\n  }\r\n\r\n  fetchMedicineData(): void {\r\n    this.http.get<any[]>(\"http://localhost:1111/Medicine\")\r\n      .subscribe(response => {\r\n        this.medicine = response;\r\n        console.log('response= ',response);\r\n        \r\n      }, error => {\r\n        console.error('Error:', error);\r\n      });\r\n  }\r\n\r\n  onStore(){\r\n    let OriginalPrice = this.medicineForm.controls['price'].value\r\n    \r\n    if(this.isEdit){\r\n      this.updateMedicine()\r\n    }else{\r\n      this.http.post(\"http://localhost:1111/newMedicine\", this.medicineForm.value)\r\n      .subscribe(response => {\r\n        console.log(response);\r\n      }, error => {\r\n        console.error('Error:', error);\r\n      });\r\n\r\n      this.fetchMedicineData()\r\n      this.isNewMedicineAdded = true\r\n      alert(' added 10% discount ')\r\n      this.router.navigate(['/pharmamedicine']);\r\n    }\r\n    \r\n  }\r\n\r\n\r\n  onEdit(data:any){\r\n    this.isEdit = true\r\n    const formValues = {\r\n      medicineName:data.medicineName,\r\n      dosage:data.dosage,\r\n      price:data.price,\r\n    };\r\n\r\n    this.medicineForm.patchValue(formValues)\r\n  }\r\n\r\n  updateMedicine(){\r\n     this.http.put(\"http://localhost:1111/updatemedicine\", this.medicineForm.value)\r\n      .subscribe(response => {\r\n        console.log(response);\r\n      }, error => {\r\n        console.error('Error:', error);\r\n      });\r\n      this.fetchMedicineData()\r\n  }\r\n\r\n  onDelete(name:any){\r\n    this.http.delete(`http://localhost:1111/deletemedicine/${name}`)\r\n      .subscribe(response => {\r\n        console.log(response);\r\n      }, error => {\r\n        console.error('Error:', error);\r\n      });\r\n      this.fetchMedicineData()\r\n\r\n    this.deleted = -1;\r\n  }\r\n\r\n  addMethod(): void {\r\n    this.isShowForm = true\r\n    \r\n  }\r\n}"],"mappings":""},"metadata":{},"sourceType":"module","externalDependencies":[]}